<div class="formMap">
    <form [formGroup]="formMapSearch" (ngSubmit)="onSubmit()">
        <input type="text" formControlName="name" id="name" placeholder="Ville...">
        <button type="submit">Rechercher</button>
        <div class="err">
            
        </div>
        <div class="errorForm" *ngIf="formMapSearch.status === 'INVALID' && this.formSubmitted === true">
            <div *ngIf="formMapSearch.controls['name'].errors?.['required']">
                <span>Veuillez entrer le nom d'une ville</span>
            </div>
            <div *ngIf="formMapSearch.controls['name'].errors?.['minlength'].actualLength < 2">
                <span>Le nom de la ville doit avoir deux caractères minimum</span>
            </div>
        </div>  
    </form>
</div>

<div class="map-container">
  <section class="map-frame">
    <div id="map"></div>
  </section>
  <section class="favoris-frame">
    <div class="favorisBlock" *ngIf="showFavoris">
      <h3>Vos favoris</h3>
      <ul *ngFor="let favoris of favoritData">
        <li>
          <button (click)="showStationsByName(favoris.nom)">{{favoris.nom}}</button>
        </li>
        <ul>
          <li>{{ favoris.nom }}</li>
          <ul *ngFor="let station of favoris.stations">
            <div >
              <span (click)="showStationsFavoris(station.nom)">
                  {{ station.nom }}

                </span>
                <span *ngIf="station.status" style="color: red; font-size:20px"> ♥ </span>
                <span *ngIf="!station.status"style=" font-size:20px"> ♥ </span>
             
            </div>
          </ul>
        </ul>
      </ul>
    </div>
    <div class="printData" *ngIf="showFavoris == false">
      <div class="printTitle">
        <h3>{{ currentData.city.name }}</h3>
      </div>
      <div class="printValue">
        <p><span>Moyenne indice qualité de l'air :</span> {{ currentData.aqi }} AQI</p>
        <p><span>Température :</span> {{ currentData.iaqi.t?.v }} °C</p>
        <p *ngIf="currentData.iaqi.pm25 != undefined"><span>PM 2.5 :</span> {{ currentData.iaqi.pm25?.v }} µ</p>
        <p *ngIf="currentData.iaqi.pm10 != undefined"><span>PM 10 :</span> {{ currentData.iaqi.pm10?.v }} µ</p>
        <p *ngIf="currentData.iaqi.h != undefined"><span>Humidité :</span> {{ currentData.iaqi.h?.v }} %</p>
        <p *ngIf="currentData.iaqi.p != undefined"><span>Pression :</span> {{ currentData.iaqi.p?.v }} hPa</p>
        <p *ngIf="currentData.iaqi.w != undefined"><span>Vent :</span> {{ currentData.iaqi.w?.v }} km/h</p>
      </div>
      <div class="buttonAddFav">
        <button (click)="showStationsByName(currentData.city.name)">
          Ajouté aux favoris
        </button>
      </div>
    </div>
  </section>
</div>
